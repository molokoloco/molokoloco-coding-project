#summary Personnal notes for installing LAMP based on DEBIAN OS

= DEBIAN =

{{{
*** DEBIAN ****
apt-get install build-essential

apt-get update && apt-get dist-upgrade

aptitude update && aptitude dist-upgrade
#aptitude upgrade

aptitude install nano lynx zip unzip bzip2

nano /etc/apt/source.list
deb http://packages.dotdeb.org stable all
deb-src http://packages.dotdeb.org stable all
apt-get update

*** APACHE ****
aptitude install apache2 apache2-doc
/etc/init.d/apache2 restart

*** PHPMYADMIN ****
# dependance complete LAMP SERVEUR ;)
aptitude install phpmyadmin

*** UTILS ****
aptitude install bind9

#nano /etc/apt/source.list
deb http://debian.home-dn.net/sargepostfix-vda/

apt-get install postfix postfix-mysql

apt-getinstallvsftpd

*** GD ****
aptitude install libtool libjpeg62 libjpeg62-dev libt1-dev libpng2 libfreetype6 libfreetype6-dev xlibs freetype2 xlibs-dev libpng3 libpng3-dev libfontconfig1 libfontconfig1-dev

*** IMAGE MAGICK ****
http://www.ducea.com/2006/12/21/install-imagemagick-557-on-debian/
aptitude install imagemagick

wget ftp://ftp.imagemagick.net/pub/ImageMagick/ImageMagick-5.5.7-36.tar.gz
./compile; make; make install

apt-get build-dep imagemagick

wget #http://ftp.fr.debian.org/debian/pool/main/i/imagemagick/imagemagick_6.2.4.5.dfsg1-1_i386.deb

*** MYSQL ****
aptitude install mysql-client mysql-common mysql-query-browser mysql-query-browser-common mysql-server


#aptitude install mysql-client mysql-common mysql-navigator mysql-query-browser mysql-query-browser-common mysql-server

mysql -u root
mysql> USE mysql;
mysql> UPDATE user
    -> SET password = PASSWORD('bwZUjkyR')
    -> WHERE user = 'root';
mysql> flush privileges;
exit;


*** PHP 5 ****
# Php 4 + php5 : http://www.generation-linux.net/article.php3?id_article=2
# Php 4 // aptitude install libapache2-mod-php4 php4-mysql php4-gd php4-cli php4-cgi php4-common php4-curl

apt-get install php5-curl php5-dev php5-gd php5-gmp php5-imap php5-ldap php5-mcrypt php5-mhash php5-ming
ln -s /usr/lib/libming.so.0 libming.so

#aptitude install libcurl3-dev libmcrypt-dev libzzip-dev freetype2 imagemagick expat libmhash-dev libmagic1 libapr0 libexpat1-dev libexpat1 libzzip-0-12 mimedecode mime-support libbz2-dev libgmp3-dev libncurses5-dev ssl-cert libc-client-dev libming-dev
#aptitude install php5 php5-cli php5-cgi php5-dba php5-spl php5-mysql php5-pgsql php5-simplexml php5-sqlite php5-bz2 php5-gd php5-imagick
#???# aptitude install php5-cgi php5-curl php5-imagick php5-json

aptitude search php5
apt-cache search php5

*** WEBMIN ****
#aptitude install webmin/unstable

aptitude install libnet-ssleay-perl libauthen-pam-perl libauthen-pam-perl libio-pty-perl libio-pty-perl libmd5-perl libmd5-perl

cd home/
mkdir download/
cd download/

wget http://heanet.dl.sourceforge.net/sourceforge/webadmin/webmin_1.350_all.deb
dpkg -i webmin_1.350_all.deb
aptitude install webmin/unstable

/etc/webmin/miniserv.conf

/etc/webmin/start

Ca marche ?
https://ns24436.ovh.net:10000/
https://ns24436.ovh.net:10000/file/
 
*** APACHE CONF ****
/etc/apache2/apache2.conf

http://www.paradoxal.org/blog/post/2007/06/13/Serveur-Debian-apache

# UserDir is now a module
UserDir public_html
UserDir disabled root

<Directory /home/*/public_html>
        AllowOverride FileInfo AuthConfig Limit
        Options Indexes SymLinksIfOwnerMatch IncludesNoExec
</Directory>

< mod mime ... >
    AddType application/x-httpd-php .php .phtml
    AddType application/x-httpd-php-source .phps


/etc/init.d/apache2 restart


#Apache propose aux utilisateurs du système d'avoir un espace public pour mettre des documents web en général. Ce répertoire est assez #réstrictif, ce qui est bien, et root n'y a pas le droit. Le module userdir d'Apache utilise les fichiers de configuration: #/etc/apache2/mods-available/userdir.conf et /etc/apache2/mods-available/userdir.load Pour que le module fonctionne, il faut créer des #liens symboliques de ces fichiers, vers le répertoire /etc/apache2/mods-enable.

#/home/user/public_html. Le répertoire public est ensuite accessible depuis l'url de la machine suivi de ~/user:

 $ su
ln -s /etc/apache2/mods-available/userdir.conf /etc/apache2/mods-enabled/userdir.conf
ln -s /etc/apache2/mods-available/userdir.load /etc/apache2/mods-enabled/userdir.load
/etc/init.d/apache2 reload


Cf. +++ WEBMIN +++

*** USER DIR ****
$ cd /home/giminik/
$ mkdir public_html
$ chmod 755 public_html/
$ chmod o+x ./
$ cd public_html
$ cat > index.php
<?php phpinfo(); ?>
CTRL+D pour fin de fichier

A partir de maintenant, l'espace Web personnel est accessible à partir de l'adresse http://127.0.0.1/~utilisateur/

*** SYSTEM CHECK ****
apt-get clean
aptitude clean

dpkg-reconfigure --all

# dpkg-reconfigure --apacheconfig
# updatedb
# locate httpd


*** E-MAILS ****
# heu..
http://aide.sivit.fr/index.php?2007/02/01/158-installation-d-un-webmail-sous-debian-squirrelmail
# bug impossible remove sqwebmail
# update-rc.d -f exim4 remove", "reboot", "apt-get install postfix" pis "apt-get install sqwebmail".
/usr/sbin/sendmail -f login@domaine.com ...


aptitude  install uw-imapd

dans /etc/hosts.allow, ajouter une ligne : ALL : nom

aptitude install squirrelmail

/usr/sbin/squirrelmail-configure

cd etc/apache2/ssl/
ln -s usr/share/squirrelmail webmail

# webmin # Exim Monitor # category Servers

aptitude  install cyrus21-pop3d

aptitude install xinetd

/etc/init.d/xinetd reload




aptitude install mailutils mailx


TO CHECKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK !!!!!!!!!!!!!!!!!!!!!!!!!!!!!

*** AWSTATS ****
http://www.henol.fr/article-awstats.html

apt-get install awstats

TO CHECKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK !!!!!!!!!!!!!!!!!!!!!!!!!!!!!


*** FTP ****

aptitude install proftpd (cf. webmin)

# etc/proftpd/proftpd.conf

UseIPv6                on
ServerName            "NS24436.OVH.NET - Bienvenue *_*"
ServerAdmin         molokoloco@gmail.com
ServerType            standalone
DeferWelcome        on
MaxLoginAttempts    3
RequireValidShell    no
RootLogin             off
RequireValidShell    no
DeleteAbortedStores on
MultilineRFC2228     on
DefaultServer        on
ShowSymlinks        on
TimeoutNoTransfer     600
TimeoutStalled         600
TimeoutIdle         1200
DisplayLogin        welcome.msg
DisplayFirstChdir   message
ListOptions         "-l"
DenyFilter            \*.*/

<VirtualHost ftp.temp.saintdesprit.net>
    <Limit LOGIN>
        DenyAll
    </Limit>
   
    ServerName              "Casimir FTP service"
    TransferLog             /var/log/proftpd/temp.saintdesprit.net.log
    DefaultRoot             /home/casimir/
    User                    casimir
    Group                   casimir

    #<Anonymous home/casimir>
        #User            casimir
        #Group            casimir
        #UserAlias        anonymous ftp
    #</Anonymous>
</VirtualHost>

<Global>
    DefaultRoot ~
   
    <Directory /home/saintdes/>
        GroupOwner saintdes
        UserOwner saintdes
    </Directory>
    ...
</Global>

}}}